
{% load static %}

<header class="new-header">
    <div class="d-flex align-items-center justify-content-between"> <!-- [Mobile Media Block] start -->
      <div class="d-flex align-items-center" style="flex: 1;">
        <ul class="list-unstyled">
          <!-- Left side - empty or add menu items if needed -->
        </ul>
      </div>
      <!-- [Mobile Media Block end] -->

      <!-- Center Logo -->
      <div class="d-flex justify-content-center align-items-center" style="flex: 1;">
        <a href="{% url 'dashboard' %}" class="navbar-brand-center">
          <img src="{% static '/img/trove_logo.png' %}"
               alt="Trove Logo"
               style="height: 60px; width: auto; display: block;">
        </a>
      </div>

      <!-- Right side icons -->
      <div class="d-flex align-items-center justify-content-end" style="flex: 1;">
        <ul class="list-unstyled">
          <li class="dropdown pc-h-item">
            <a
              class="pc-head-link dropdown-toggle arrow-none me-0"
              data-bs-toggle="dropdown"
              href="#"
              role="button"
              aria-haspopup="false"
              aria-expanded="false"
            >
              <i data-feather="bell"></i>
              <span class="badge bg-success pc-h-badge">3</span>
            </a>
          <div class="d-flex align-items-center">
            <div class="dropdown-menu dropdown-notification dropdown-menu-end pc-h-dropdown">
              
              <div class="dropdown-header d-flex align-items-center justify-content-between">
                <h5 class="m-0">Notifications</h5>
                <a href="#!" class="btn btn-link btn-sm">Mark all read</a>
              </div>
              <div class="dropdown-body text-wrap header-notification-scroll position-relative" style="max-height: calc(100vh - 215px)">
                <p class="text-span">Today</p>
                <div class="card mb-0">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="flex-shrink-0">
                        <img class="img-radius avtar rounded-0" src="{% static "assets/images/user/avatar-1.jpg" %}" alt="Generic placeholder image">
                      </div>
                      <div class="flex-grow-1 ms-3">
                        <span class="float-end text-sm text-muted">2 min ago</span>
                        <h5 class="text-body mb-2">UI/UX Design</h5>
                        <p class="mb-0"
                          >Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                          type and scrambled it to make a type</p
                        >
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card mb-0">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="flex-shrink-0">
                        <img class="img-radius avtar rounded-0" src="{% static "assets/images/user/avatar-2.jpg" %}" alt="Generic placeholder image">
                      </div>
                      <div class="flex-grow-1 ms-3">
                        <span class="float-end text-sm text-muted">1 hour ago</span>
                        <h5 class="text-body mb-2">Message</h5>
                        <p class="mb-0">Lorem Ipsum has been the industry's standard dummy text ever since the 1500.</p>
                      </div>
                    </div>
                  </div>
                </div>
                <p class="text-span">Yesterday</p>
                <div class="card mb-0">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="flex-shrink-0">
                        <img class="img-radius avtar rounded-0" src="{% static "assets/images/user/avatar-3.jpg" %}" alt="Generic placeholder image">
                      </div>
                      <div class="flex-grow-1 ms-3">
                        <span class="float-end text-sm text-muted">2 hour ago</span>
                        <h5 class="text-body mb-2">Forms</h5>
                        <p class="mb-0"
                          >Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                          type and scrambled it to make a type</p
                        >
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card mb-0">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="flex-shrink-0">
                        <img class="img-radius avtar rounded-0" src="{% static "assets/images/user/avatar-4.jpg" %}" alt="Generic placeholder image">
                      </div>
                      <div class="flex-grow-1 ms-3">
                        <span class="float-end text-sm text-muted">12 hour ago</span>
                        <h5 class="text-body mb-2">Challenge invitation</h5>
                        <p class="mb-2"><span class="text-dark">Jonny aber</span> invites to join the challenge</p>
                        <button class="btn btn-sm btn-outline-secondary me-2">Decline</button>
                        <button class="btn btn-sm btn-primary">Accept</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card mb-0">
                  <div class="card-body">
                    <div class="d-flex">
                      <div class="flex-shrink-0">
                        <img class="img-radius avtar rounded-0" src="{% static "assets/images/user/avatar-5.jpg" %}" alt="Generic placeholder image">
                      </div>
                      <div class="flex-grow-1 ms-3">
                        <span class="float-end text-sm text-muted">5 hour ago</span>
                        <h5 class="text-body mb-2">Security</h5>
                        <p class="mb-0"
                          >Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of
                          type and scrambled it to make a type</p
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="text-center py-2">
                <a href="#!" class="link-danger">Clear all Notifications</a>
              </div>
            </div>
          </li>
        </ul>
      </div>

      <div class="d-flex align-items-center">
        <ul class="list-unstyled">
          <li class="dropdown pc-h-item header-user-profile">
            <a
              class="pc-head-link dropdown-toggle arrow-none me-0"
              data-bs-toggle="dropdown"
              href="#"
              role="button"
              aria-haspopup="false"
              data-bs-auto-close="outside"
              aria-expanded="false"
            >
              <i data-feather="user"></i>
            </a>
            <div class="dropdown-menu dropdown-user-profile dropdown-menu-end pc-h-dropdown p-0 overflow-hidden">
              <div class="dropdown-header d-flex align-items-center justify-content-between bg-primary">
                <div class="d-flex my-2">
                  <div class="flex-shrink-0">
                    <img src="{% static "assets/images/user/avatar-2.jpg" %}" alt="user-image" class="user-avtar wid-35" />
                  </div>
                  <div class="flex-grow-1 ms-3">
                    <h6 class="text-white mb-1">Andrew Carnegie</h6>
                    <span class="text-white text-opacity-75">acarn@andrew.cmu.edu</span>
                  </div>
                </div>
              </div>
              <div class="dropdown-body">
                <div class="profile-notification-scroll position-relative" style="max-height: calc(100vh - 225px)">
                  <a href="#" class="dropdown-item">
                    <span>
                      <svg class="pc-icon text-muted me-2">
                        <use xlink:href="#custom-setting-outline"></use>
                      </svg>
                      <span>Settings</span>
                    </span>
                  </a>
                  <a href="#" class="dropdown-item">
                    <span>
                      <svg class="pc-icon text-muted me-2">
                        <use xlink:href="#custom-share-bold"></use>
                      </svg>
                      <span>Share</span>
                    </span>
                  </a>
                  <a href="#" class="dropdown-item">
                    <span>
                      <svg class="pc-icon text-muted me-2">
                        <use xlink:href="#custom-lock-outline"></use>
                      </svg>
                      <span>Change Password</span>
                    </span>
                  </a>
                  <div class="d-grid my-2">
                    {% if request.user.is_authenticated %}
                    <a href="{% url "logout" %}" class="btn btn-primary">
                      <svg class="pc-icon me-2">
                        <use xlink:href="#custom-logout-1-outline"></use></svg
                      >Logout
                    </a>
                    {% else %}
                    <a href="{% url "login" %}" class="btn btn-primary">
                      <svg class="pc-icon me-2">
                        <use xlink:href="#custom-logout-1-outline"></use>
                      </svg>Login
                    </a>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <!-- Horizontal Tabs Navigation -->
    <div class="horizontal-tabs-nav">
      <nav class="tabs-container">
        <a href="{% url 'dashboard' %}" class="tab-item">
          <span class="tab-text">Dashboard</span>
          <img src="{% static 'img/coin.png' %}" alt="coin" class="coin-animation">
        </a>
        <a href="{% url 'cards' %}" class="tab-item">
          <span class="tab-text">My Cards</span>
          <img src="{% static 'img/coin.png' %}" alt="coin" class="coin-animation">
        </a>
        <a href="{% url 'deals' %}" class="tab-item">
          <span class="tab-text">Deals</span>
          <img src="{% static 'img/coin.png' %}" alt="coin" class="coin-animation">
        </a>
        <a href="{% url 'goals' %}" class="tab-item">
          <span class="tab-text">Goals</span>
          <img src="{% static 'img/coin.png' %}" alt="coin" class="coin-animation">
        </a>
        <a href="{% url 'subscriptions' %}" class="tab-item">
          <span class="tab-text">Subscriptions</span>
          <img src="{% static 'img/coin.png' %}" alt="coin" class="coin-animation">
        </a>
      </nav>
    </div>

    <style>
      .horizontal-tabs-nav {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      }

      .tabs-container {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0;
      }

      .tab-item {
        flex: 1;
        text-align: center;
        padding: 20px 30px;
        color: white;
        text-decoration: none;
        font-size: 18px;
        font-weight: 600;
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
        border-bottom: 3px solid transparent;
        z-index: 1;
      }

      .tab-item:hover:not(.active) {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
      }

      .tab-text {
        display: inline-block;
        position: relative;
        z-index: 2;
      }

      .coin-animation {
        position: absolute;
        width: 40px;
        height: 40px;
        opacity: 0;
        top: -40px;
        left: 50%;
        transform: translateX(-50%);
        pointer-events: none;
        z-index: -1;
      }

      /* Hover animation - coin falls and disappears */
      .tab-item:hover:not(.active) .coin-animation {
        animation: coinFallHover 0.8s ease-in-out;
      }

      @keyframes coinFallHover {
        0% {
          opacity: 0;
          top: -40px;
          transform: translateX(-50%);
        }
        20% {
          opacity: 1;
        }
        100% {
          opacity: 0;
          top: 48px;
          transform: translateX(-50%);
        }
      }

      /* Active tab styles */
      .tab-item.active {
        background: rgba(255, 255, 255, 0.15);
      }

      /* Yellow border as pseudo-element to layer above coin */
      .tab-item.active::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: #ffd700;
        z-index: 2;
      }

      /* Active tab coin - stays at half position */
      .tab-item.active .coin-animation {
        opacity: 1;
        top: 43px;
        animation: coinFallActive 0.6s ease-out forwards;
      }

      @keyframes coinFallActive {
        0% {
          opacity: 0;
          top: -40px;
          transform: translateX(-50%);
        }
        30% {
          opacity: 1;
        }
        100% {
          opacity: 1;
          top: 43px;
          transform: translateX(-50%);
        }
      }

      /* Leaving active tab - coin finishes falling */
      .tab-item.leaving .coin-animation {
        animation: coinFallComplete 0.4s ease-in forwards;
      }

      @keyframes coinFallComplete {
        0% {
          opacity: 1;
          top: 43px;
          transform: translateX(-50%);
        }
        100% {
          opacity: 0;
          top: 48px;
          transform: translateX(-50%);
        }
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.tab-item');
        const currentPath = window.location.pathname;

        // Set initial active tab based on current URL
        tabs.forEach(tab => {
          const tabPath = new URL(tab.href).pathname;
          if (tabPath === currentPath) {
            tab.classList.add('active');
          }
        });

        // Handle tab clicks
        tabs.forEach(tab => {
          tab.addEventListener('click', function(e) {
            // Find currently active tab
            const currentActive = document.querySelector('.tab-item.active');

            if (currentActive && currentActive !== this) {
              // Add leaving class to current active tab
              currentActive.classList.add('leaving');

              // Remove active and leaving classes after animation
              setTimeout(() => {
                currentActive.classList.remove('active', 'leaving');
              }, 400);
            }

            // Don't add active class here - let page navigation handle it
          });
        });
      });
    </script>
</header>