{% extends "layouts/base-auth.html" %}
{% load static %}

<script>
  document.title = 'Login | PieceWise';
</script>

{% block content %}

  <style>
    .auth-form .form-group {
      width: 100%;
    }
    .auth-form input[type="text"],
    .auth-form input[type="password"],
    .auth-form input[type="email"] {
      width: 100%;
      box-sizing: border-box;
    }

    /* Hide the default circle background */
    .auth-bg {
      display: none !important;
    }

    /* Floating Glass Squares Theme (matching main site) */
    body {
      background: linear-gradient(135deg,
        rgba(250, 245, 255, 0.6),
        rgba(245, 250, 255, 0.6),
        rgba(255, 250, 245, 0.6)
      ) !important;
      position: relative;
      overflow-x: hidden;
    }

    body::before,
    body::after {
      content: '';
      position: fixed;
      border-radius: 20px;
      backdrop-filter: blur(15px) saturate(180%);
      -webkit-backdrop-filter: blur(15px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow:
        0 8px 32px 0 rgba(31, 38, 135, 0.15),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.6);
      pointer-events: none;
      z-index: -1;
    }

    body::before {
      width: 550px;
      height: 550px;
      top: 10%;
      left: 5%;
      background: linear-gradient(135deg,
        rgba(255, 182, 193, 0.15),
        rgba(221, 160, 221, 0.15)
      );
      animation: float1 25s ease-in-out infinite, hueShift1 20s ease-in-out infinite;
      transform: rotate(-15deg);
    }

    body::after {
      width: 220px;
      height: 220px;
      bottom: 15%;
      right: 8%;
      background: linear-gradient(135deg,
        rgba(173, 216, 230, 0.15),
        rgba(255, 218, 185, 0.15)
      );
      animation: float2 30s ease-in-out infinite, hueShift2 25s ease-in-out infinite;
      transform: rotate(20deg);
    }

    @keyframes float1 {
      0%, 100% { transform: translate(0, 0) rotate(-15deg); }
      33% { transform: translate(30px, -40px) rotate(-10deg); }
      66% { transform: translate(-20px, 30px) rotate(-20deg); }
    }

    @keyframes float2 {
      0%, 100% { transform: translate(0, 0) rotate(20deg); }
      33% { transform: translate(-40px, 30px) rotate(25deg); }
      66% { transform: translate(25px, -35px) rotate(15deg); }
    }

    @keyframes hueShift1 {
      0%, 100% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(15deg); }
    }

    @keyframes hueShift2 {
      0%, 100% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(-15deg); }
    }

    .floating-glass-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      overflow: hidden;
    }

    .glass-square {
      position: absolute;
      border-radius: 20px;
      backdrop-filter: blur(15px) saturate(180%);
      -webkit-backdrop-filter: blur(15px) saturate(180%);
      border: 1px solid rgba(255, 255, 255, 0.5);
      box-shadow:
        0 8px 32px 0 rgba(31, 38, 135, 0.15),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.6);
    }

    .glass-square-1 {
      width: 420px;
      height: 420px;
      top: 40%;
      right: 20%;
      background: linear-gradient(135deg,
        rgba(240, 248, 255, 0.2),
        rgba(230, 230, 250, 0.2)
      );
      transform: rotate(35deg);
      animation: float3 28s ease-in-out infinite, hueShift3 22s ease-in-out infinite;
    }

    .glass-square-2 {
      width: 600px;
      height: 600px;
      top: 60%;
      left: 15%;
      background: linear-gradient(135deg,
        rgba(255, 240, 245, 0.18),
        rgba(255, 228, 225, 0.18)
      );
      transform: rotate(-25deg);
      animation: float4 32s ease-in-out infinite, hueShift4 27s ease-in-out infinite;
    }

    .glass-square-3 {
      width: 180px;
      height: 180px;
      top: 5%;
      right: 35%;
      background: linear-gradient(135deg,
        rgba(250, 240, 255, 0.2),
        rgba(245, 225, 255, 0.2)
      );
      transform: rotate(12deg);
      animation: float5 26s ease-in-out infinite, hueShift5 24s ease-in-out infinite;
    }

    @keyframes float3 {
      0%, 100% { transform: translate(0, 0) rotate(35deg); }
      33% { transform: translate(-35px, 40px) rotate(30deg); }
      66% { transform: translate(30px, -30px) rotate(40deg); }
    }

    @keyframes float4 {
      0%, 100% { transform: translate(0, 0) rotate(-25deg); }
      33% { transform: translate(40px, -35px) rotate(-30deg); }
      66% { transform: translate(-30px, 40px) rotate(-20deg); }
    }

    @keyframes float5 {
      0%, 100% { transform: translate(0, 0) rotate(12deg); }
      33% { transform: translate(25px, 35px) rotate(17deg); }
      66% { transform: translate(-30px, -25px) rotate(7deg); }
    }

    @keyframes hueShift3 {
      0%, 100% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(10deg); }
    }

    @keyframes hueShift4 {
      0%, 100% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(-12deg); }
    }

    @keyframes hueShift5 {
      0%, 100% { filter: hue-rotate(0deg); }
      50% { filter: hue-rotate(8deg); }
    }

    /* Glass morphism for the login card */
    .card {
      background: rgba(255, 255, 255, 0.75) !important;
      backdrop-filter: blur(10px) saturate(150%);
      -webkit-backdrop-filter: blur(10px) saturate(150%);
      border: 1px solid rgba(255, 255, 255, 0.5) !important;
      box-shadow:
        0 8px 32px 0 rgba(31, 38, 135, 0.15),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.7) !important;
    }
  </style>

  <!-- Floating glass squares background -->
  <div class="floating-glass-bg">
    <div class="glass-square glass-square-1"></div>
    <div class="glass-square glass-square-2"></div>
    <div class="glass-square glass-square-3"></div>
  </div>

  <div class="auth-main">
    <div class="auth-wrapper v1">
      <div class="auth-form">
        <div class="position-relative my-5">
          <div class="auth-bg">
            <span class="r"></span>
            <span class="r s"></span>
            <span class="r s"></span>
            <span class="r"></span>
          </div>
          <div class="card mb-0">
            <form method="post" class="card-body">
              {% csrf_token %}

              <div class="text-center">
              <a href="{% url "index" %}">
                <div>
                  <img
                    src="{% static "img/logo.png" %}"
                    alt="img"
                    style="display:block;margin:0 auto;max-width:300px;width:80%;min-width:150px;height:auto;object-fit:contain;"
                    loading="lazy"
                  >
                </div>
              </a>
            </div>

              <h4 class="text-center f-w-500 mt-4 mb-3">Login</h4>
              <p class="text-center mb-3">
                <span>Test Account: <strong>test / Pass12__</strong></span>
                <br />
                <span>ADMIN: <strong>admin / Pass12__</strong></span>
              </p>
              
              {% if form.non_field_errors %}
                {% for error in form.non_field_errors %}
                  <span class="d-block text-danger mb-3">{{ error }}</span>
                {% endfor %}
              {% endif %}

              {% for field in form %}
              <div class="form-group mb-3">
                {{ field }}
              </div>
              {% endfor %}
              <div class="d-flex mt-1 justify-content-between align-items-center">
                <div class="form-check">
                  <input class="form-check-input input-primary" type="checkbox" id="customCheckc1" checked="">
                  <label class="form-check-label text-muted" for="customCheckc1">Remember me?</label>
                </div>
                <a href="{% url "password_reset" %}" class="text-secondary f-w-400 mb-0">Forgot Password?</a>
              </div>
              <div class="text-center mt-4">
                <button type="submit" class="btn btn-primary shadow px-sm-4">Login</button>
              </div>
              <div class="d-flex justify-content-between align-items-end mt-4">
                <h6 class="f-w-500 mb-0">Don't have an Account?</h6>
                <a href="{% url "register" %}" class="link-primary">Create Account</a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock content %}